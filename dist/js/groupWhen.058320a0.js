"use strict";(self["webpackChunkmawed"]=self["webpackChunkmawed"]||[]).push([[883],{750:function(t,e,i){i.r(e),i.d(e,{default:function(){return k}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create_one mt-5 position-relative"},[e("b-container",[e("div",{staticClass:"header mt-4 d-flex align-items-center justify-content-between"},[e("div",{staticClass:"h4 mb-0 font-weight-normal"},[t._v(t._s(t.$t("createGroupInvite")))]),e("button",{staticClass:"fs-sm mx-3 filter_btn active",on:{click:t.preview}},[e("BIcon",{staticClass:"mr-2",attrs:{icon:"eye",scale:"1.5"}}),t._v(" "+t._s(t.$t("previewInvite"))+" ")],1)]),e("div",{staticClass:"field_title mt-4 pt-1"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("availableTimes")))])]),e("b-form",{staticClass:"mt-4",on:{submit:function(e){return e.preventDefault(),t.next.apply(null,arguments)}}},[e("b-row",[e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"duration",expression:"'duration'"}],attrs:{label:t.$t("eventDuration"),value:t.invite.duration,options:t.durationOptions,required:""},on:{change:t.durationChanged}},[e("BIcon",{attrs:{slot:"icon_left",icon:"clock-history"},slot:"icon_left"}),t.durationPlaceholder?e("virtual-input",{staticClass:"mb-0",on:{click:function(e){return t.$bvModal.show("DurationModal")}}},[e("span",{staticClass:"text-black",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.durationPlaceholder))]),e("BIcon",{attrs:{slot:"icon_right",icon:"pencil"},slot:"icon_right"})],1):t._e()],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"duration"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(t._s(t.$t("durationDesc")))])],1)]),e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"slotIncrement",expression:"'slotIncrement'"}],attrs:{label:t.$t("timeSlotIncrement"),options:t.slotIncrementOptions,required:""},model:{value:t.invite.slotIncrement,callback:function(e){t.$set(t.invite,"slotIncrement",e)},expression:"invite.slotIncrement"}},[e("BIcon",{attrs:{slot:"icon_left",icon:"clock"},slot:"icon_left"})],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"slotIncrement"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(" "+t._s(t.$t("slotIncrementDesc"))+" ")])],1)]),e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"dateRange",expression:"'dateRange'"}],attrs:{label:t.$t("dateRange"),value:t.dayRangeValue,options:t.dateRangeOptions,required:""},on:{change:t.dayRangeChanged}},[e("BIcon",{attrs:{slot:"icon_left",icon:"calendar3"},slot:"icon_left"}),t.dateRangeStr?e("virtual-input",{staticClass:"mb-0",attrs:{inputProps:{class:t.dateRangeStr?"d-inline-block w-auto":""}},on:{click:function(e){return t.$bvModal.show("DateRangeModal")}}},[e("span",{staticClass:"text-black",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.dateRangeStr))]),e("BIcon",{attrs:{slot:"icon_right",icon:"pencil"},slot:"icon_right"})],1):t._e()],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"dateRange"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(" "+t._s(t.$t("dateRangeDesc"))+" ")])],1)]),e("b-col",{attrs:{cols:"12"}},[e("div",{staticClass:"availability mt-4"},[e("div",{staticClass:"availability_header d-flex w-100 align-items-center justify-content-between flex-wrap"},[e("div",{staticClass:"text-muted font-weight-500"},[e("span",[t._v(t._s(t.$t("selectAvailability")))]),e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("selectAvailabilityTooltip")}},[e("BIcon",{staticClass:"mx-2",staticStyle:{opacity:"0.5"},attrs:{icon:"question-circle",scale:"1.2"}})],1)]),e("div",{staticClass:"py-2 px-3 rounded-pill font-weight-500 d-flex align-items-center justify-content-center",style:""+(t.invite.preventConflict?"background-color: #f8e71c1c; color: #948a19":"background-color: #ff001a1a; color: #0000008a")},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("doubleBookingPreventionToolTip")}},[e("BIcon",{attrs:{icon:"info-circle",scale:"1.2"}})],1),e("span",{staticClass:"fs-sm mx-2"},[t._v(t._s(t.$t("doubleBookingPrevention")))]),e("b-checkbox",{attrs:{switch:""},model:{value:t.invite.preventConflict,callback:function(e){t.$set(t.invite,"preventConflict",e)},expression:"invite.preventConflict"}})],1)]),e("div",{staticClass:"availability_body my-4"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap mb-3"},[e("div",{staticClass:"availability_btns_controls d-flex align-items-center justify-content-between fs-sm font-weight-600 flex-wrap",staticStyle:{height:"35px"}},[e("div",{staticClass:"before_btn d-flex align-items-center",class:{disabled:t.dateRangeBtns.prev.isDisabled},on:{click:t.prevDateRange}},[t.$isRtl?e("BIcon",{attrs:{icon:"chevron-right"}}):e("BIcon",{attrs:{icon:"chevron-left"}}),e("span",{staticClass:"mx-1"},[t._v(" "+t._s(t.$t("before"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.FDOL.format("MMM D")))])])],1),e("div",{staticClass:"after_btn d-flex align-items-center ml-4",class:{disabled:t.dateRangeBtns.next.isDisabled},on:{click:t.nextDateRange}},[e("span",{staticClass:"mx-1"},[t._v(" "+t._s(t.$t("after"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.EDOL.format("MMM D")))])]),t.$isRtl?e("BIcon",{attrs:{icon:"chevron-left"}}):e("BIcon",{attrs:{icon:"chevron-right"}})],1),t.dateRangeBtns.next.isDisabled?e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"extend_btn d-flex align-items-center ml-4",attrs:{title:t.$t("extendTooltip")},on:{click:t.extendDateRange}},[e("BIcon",{attrs:{icon:"plus-lg"}}),e("span",{staticClass:"mx-1"},[t._v(t._s(t.$t("extend"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.$t("dateRange")))])])],1):t._e()]),e("div",{staticClass:"availablity_timezone_control d-flex align-items-center"},[e("time-zones",{model:{value:t.invite.timezone,callback:function(e){t.$set(t.invite,"timezone",e)},expression:"invite.timezone"}}),e("span",{staticClass:"btn_icon ml-2"},[e("NotAllowIcon",{staticStyle:{fill:"#5e5e5e"},attrs:{width:"1.5rem"}})],1)],1)]),e("b-list-group",t._l(t.range,(function(i,a){return e("AvailableItem",{key:a,attrs:{date:i,availability:t.invite.availability},on:{click:t.openAvailabilityModal}})})),1)],1)])])],1)],1)],1),e("div",{staticClass:"footer_control bg-white border-top w-100"},[e("b-container",{staticClass:"h-100"},[e("div",{staticClass:"d-flex justify-content-end align-items-center h-100"},[e("b-button",{staticClass:"filter_btn active mr-3 font-weight-500",attrs:{size:"sm"},on:{click:t.back}},[e("BIcon",{staticClass:"mr-2",attrs:{icon:""+(t.$isRtl?"chevron-right":"chevron-left"),scale:"0.8"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),e("b-button",{staticClass:"px-3",attrs:{variant:"primary"},on:{click:t.next}},[t._v(" "+t._s(t.$t("next"))+" ")])],1)])],1),e("DurationModal",{model:{value:t.invite.duration,callback:function(e){t.$set(t.invite,"duration",e)},expression:"invite.duration"}}),e("DateRangeModal",{attrs:{value:t.invite.dateRange},on:{submit:t.dateRangeChanged}}),e("AvailabilityModal",{ref:"availabilityModal",attrs:{duration:t.invite.duration},on:{submit:t.availableDateChanged}}),e("PreviewInvite",{ref:"preview"})],1)},s=[],n=(i(6699),i(5294)),o=i(965),l=i(3048),r=i(3375),c=i(8557),d=i(4106),u=i(9511),m=i(1257),v=i(8584),h=i(2088),f=i(325),b=i(9290),p=i(5476),g=i(9033),C=i(6289),y=i(4659),$=i(5795),_=i(9851),O=i(4915),R={components:{FormInput:n.Z,FormTextArea:l.Z,VirtualInput:r.Z,CameraPlus:d.Z,ZoomIcon:u.Z,GoogleMeetIcon:m.Z,URLModal:v.Z,DurationModal:h.Z,DateRangeModal:f.Z,FormSelect:o.Z,AvailabilityModal:b.Z,TimeZones:c.Z,NotAllowIcon:p.Z,AvailableItem:_.Z,PreviewInvite:g.Z},mixins:[y.oE],data(){return{invite:{duration:30,slotIncrement:30,dateRange:{type:"days",start:"",end:""},timezone:"",preventConflict:!0,availability:[]},firstDateOfList:""}},validations:{invite:{duration:{required:$.C1},slotIncrement:{},dateRange:{},timezone:{},preventConflict:{},availability:{}}},watch:{"invite.dateRange.start"(t){this.firstDateOfList=t}},async beforeRouteEnter(t,e,i){let a=O.Z.state.invites.one;if(!a.name)return i("/create/group");i((t=>t.init(a)))},computed:{durationOptions(){return this.$store.state.invites.durationOptions},durationPlaceholder(){let t=!this.durationOptions.some((t=>t.value==this.invite.duration));if(!t)return"";let e=this.invite.duration;if(e<60)return this.$moment.duration(e,"minutes").humanize();let i=Math.floor(e/60);if(e%=60,0===e)return this.$moment.duration(i,"hours").humanize();i=this.$moment.duration(i,"hours").humanize(),e=this.$moment.duration(e,"minutes").humanize();let a=this.$isRtl?" Ùˆ ":" ";return i+a+e},slotIncrementOptions(){return this.$store.state.invites.slotIncrementOptions},dateRangeOptions(){return this.$store.state.invites.dateRangeOptions},dateRangeStr(){let{type:t,start:e,end:i}=this.invite.dateRange;if("indefinite"==t)return this.$t("indefinite");if(e=this.$moment(e).utc().startOf("date"),i=this.$moment(i).utc().startOf("date"),"days"==t){let t=i.clone().diff(e,"days");return[2,6,30].includes(t)?"":(t=1!=t?t+1:t,this.$moment.duration(t,"days").humanize()+" "+this.$t("intoFuture"))}if("specific"==t){const t=t=>t.year()===this.$moment().year();return e=e.format("MMM D"+(t(e)?"":", YYYY")),i=i.format("MMM D"+(t(i)?"":", YYYY")),e===i?e:`${e} - ${i}`}return""},FDOL(){let{start:t}=this.invite.dateRange;t=this.$moment(t).utc().startOf("date");let e=this.$moment(this.firstDateOfList).utc().startOf("date");return e=t.isSameOrAfter(e)?t:e,e},EDOL(){let{end:t}=this.invite.dateRange,e=this.$moment(this.firstDateOfList).utc().startOf("date").add(6,"d");return"days"==this.invite.dateRange.type||(t=this.$moment(t).utc().startOf("date"),e=t.isSameOrBefore(e)?t:e),e},until(){return"indefinite"==this.invite.dateRange.type?null:this.$moment(this.invite.dateRange.end).utc().startOf("date").toDate()},range(){let t=this.FDOL,e=this.EDOL;if(!t.isValid()||!e.isValid())return[];let i={freq:C.Ci.DAILY,dtstart:t.toDate(),until:e.toDate(),byweekday:[C.Ci.MO,C.Ci.TU,C.Ci.WE,C.Ci.TH,C.Ci.FR,C.Ci.SA,C.Ci.SU]};return i=new C.Ci(i),i.all().map((t=>this.$moment(t).utc().startOf("date").toDate()))},dayRangeValue:{get(){let{start:t,end:e}=this.invite.dateRange;return t=this.$moment(t).utc().startOf("date"),e=this.$moment(e).utc().startOf("date"),e.clone().diff(t,"days")},set(t){let e=this.$moment().utc().startOf("date").toDate(),i=this.$moment().utc().startOf("date").add(t,"d").toDate();this.invite.dateRange={type:"days",start:e,end:i}}},dateRangeBtns(){let{start:t,end:e}=this.invite.dateRange;return t=this.$moment(t).utc().startOf("date"),e=this.$moment(e).utc().startOf("date"),{prev:{isDisabled:t.isSame(this.FDOL,"d")},next:{isDisabled:e.isBetween(this.FDOL,this.EDOL)||e.isSame(this.EDOL,"d")}}}},methods:{init(t){for(let n in t)this.invite[n]=t[n];let e=this.$moment().utc().startOf("date").toDate(),i=this.$moment().utc().startOf("date").add(6,"d").toDate(),a={duration:480,rrule:new C.Ci({freq:C.Ci.WEEKLY,dtstart:e,until:i,byweekday:[C.Ci.TU,C.Ci.WE,C.Ci.TH,C.Ci.FR],interval:1,byhour:[9]}).toString()},s={duration:660,rrule:new C.Ci({freq:C.Ci.WEEKLY,dtstart:e,until:i,byweekday:[C.Ci.MO],interval:1,byhour:[6]}).toString()};this.invite.availability=[a,s],this.invite.dateRange={type:"days",start:e,end:i},this.firstDateOfList=e,this.$store.commit("setInvite",this.invite)},durationChanged(t){if("custom"==t)return this.$bvModal.show("DurationModal");this.invite.duration=t},dayRangeChanged(t){if("custom"==t)return this.$bvModal.show("DateRangeModal");this.dayRangeValue=t},dateRangeChanged(t){this.invite.dateRange=t},nextDateRange(){let{end:t,type:e}=this.invite.dateRange,i=this.$moment(this.firstDateOfList).utc().startOf("date").add(7,"d");t=this.$moment(t).utc().startOf("date"),"indefinite"!=e&&t.isSameOrBefore(i)&&(i=t),this.firstDateOfList=i},prevDateRange(){let{start:t}=this.invite.dateRange,e=this.$moment(this.firstDateOfList).utc().startOf("date").subtract(7,"d");t=this.$moment(t).utc().startOf("date"),this.firstDateOfList=t.isSameOrAfter(e)?t:e},extendDateRange(){this.invite.dateRange.end=this.$moment(this.invite.dateRange.end).add(7,"d")},openAvailabilityModal(t){this.$refs.availabilityModal.show(t)},hourAndMinute(t){let e=Math.floor(t),i=Math.round(60*(t-e));return{hour:e,minute:i}},availableDateChanged(t){let{repeats:e,intervals:i,date:a}=t;a=this.$moment(a).utc().startOf("date");let s=[];if("only"==e)for(let m of this.invite.availability){let t=(0,C.SA)(m.rrule),{dtstart:e,until:i,count:n}=t.origOptions;e=this.$moment(e).utc().startOf("date"),i=i&&this.$moment(i).utc().startOf("date"),1==n&&e.isSame(a,"day")&&i&&i.isSame(a,"day")||s.push(m)}else if("all"==e)for(let m of this.invite.availability){let t=(0,C.SA)(m.rrule),{dtstart:e,until:i,byweekday:a}=t.origOptions;e=this.$moment(e).utc().startOf("date"),i=i&&this.$moment(i).utc().startOf("date");let n=[5,6];1!=r?(a=a.map((t=>t.weekday)),1!=a.length||n.includes(a[0])&&s.push(m)):n.includes(e.weekday())&&i&&n.includes(i.weekday())&&s.push(m)}if(0==i.length)return void(this.invite.availability=s);const n=new C.pF;let o,l=C.Ci.WEEKLY,r=null,c=this.until,d=this.$moment(this.invite.dateRange.start).utc().startOf("date").toDate();if("only"==e)r=1,d=a.toDate(),c=a.toDate();else if("weekdays"==e)o=[C.Ci.MO,C.Ci.TU,C.Ci.WE,C.Ci.TH,C.Ci.FR];else if("all"==e){let t=[C.Ci.MO,C.Ci.TU,C.Ci.WE,C.Ci.TH,C.Ci.FR,C.Ci.SA,C.Ci.SU];o=t[a.weekday()]}for(let m of i){let t={freq:l,dtstart:d,interval:1},{hour:e,minute:i}=this.hourAndMinute(m.start);t.byhour=[e],t.byminute=[i],o&&(t.byweekday=o),r&&(t.count=r),c&&(t.until=this.$moment(c).utc().startOf("date").toDate()),n.rrule(new C.Ci(t))}let u=n.rrules();u=u.map(((t,e)=>{let{start:a,end:s}=i[e],n=60*(s-a);return{rrule:t.toString(),duration:n}})),this.invite.availability=[...u,...s]},preview(){this.$store.commit("setInvite",this.invite),this.$nextTick((()=>this.$refs.preview.open()))},next(){this.$v.$touch(),this.$v.$invalid||(this.$store.commit("setInvite",this.invite),this.$router.push("/create/group/options"))},back(){this.$store.commit("setInvite",this.invite),this.$router.push("/create/group")}}},D=R,w=i(1001),x=(0,w.Z)(D,a,s,!1,null,null,null),k=x.exports}}]);
//# sourceMappingURL=groupWhen.058320a0.js.map