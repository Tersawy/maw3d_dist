"use strict";(self["webpackChunkmawed"]=self["webpackChunkmawed"]||[]).push([[890],{2106:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("b-list-group-item",{staticClass:"d-flex align-items-center justify-content-between user-select-none",attrs:{button:""},on:{click:t.clicked}},[e("div",{staticClass:"available_date d-flex align-items-center"},[t.intervals.length?e("BIcon",{attrs:{icon:"calendar-check",width:"1rem",scale:"1.5",variant:"success"}}):e("BIcon",{staticClass:"text-muted",attrs:{icon:"calendar-x",width:"1rem",scale:"1.5"}}),e("span",{staticClass:"ml-3"},[t._v(t._s(t.displayDate))])],1),e("div",{staticClass:"available_time d-flex align-items-center text-muted"},[t.isRepeats&&t.intervals.length?e("BIcon",{staticClass:"text-muted mx-2",attrs:{icon:"arrow-repeat",width:"1rem",scale:"1.2"}}):t._e(),e("div",{staticClass:"text-right"},t._l(t.intervals,(function(i,a){return e("div",{key:a},[t._v(" "+t._s(t.intervalStr(i))+" ")])})),0),e("BIcon",{staticClass:"ml-3",attrs:{icon:""+(t.$isRtl?"chevron-left":"chevron-right"),width:"1rem"}})],1)])},s=[],n={props:{date:{},dateFormat:{type:String,default:""},availableDates:{type:Array,required:!0}},data(){return{isRepeats:!1}},computed:{displayDate(){return this.dateFormat?this.$moment(this.date).format(this.dateFormat):this.$isRtl?"ال"+this.$moment(this.date).locale("ar").format("ddd, D MMM"):this.$moment(this.date).format("ddd, MMM D")},intervals(){let t=[];for(let e of this.availableDates){let{duration:i,dates:a,rruleSet:s}=e,n=s.toString();for(let e of a)if(e=this.$moment(e).utc(),e.isSame(this.date,"date")){let a=e.hour()+e.minute()/60,s=a+i/60;t.push({start:a,end:s}),this.isRepeats=-1!=n.indexOf("BYDAY")}}return t}},methods:{intervalStr({start:t,end:e}){let i=this.$moment().set(this.hourAndMinute(t)).format("h:mm a"),a=this.$moment().set(this.hourAndMinute(e)).format("h:mm a");return`${i} - ${a}`},hourAndMinute(t){let e=Math.floor(t),i=Math.floor(60*(t-e));return{hour:e,minute:i}},clicked(){this.$emit("click",{intervals:this.intervals,date:this.date})}}},r=n,l=i(1001),o=(0,l.Z)(r,a,s,!1,null,null,null),d=o.exports},4106:function(t,e,i){i.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("svg",{attrs:{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"}},[e("path",{attrs:{d:"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5zm5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zM5 6h3V4H5V1H3v3H0v2h3v3h2z"}})])},s=[],n=i(1001),r={},l=(0,n.Z)(r,a,s,!1,null,null,null),o=l.exports},1257:function(t,e,i){i.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 87.5 72"}},[e("path",{attrs:{fill:"#00832d",d:"M49.5 36l8.53 9.75 11.47 7.33 2-17.02-2-16.64-11.69 6.44z"}}),e("path",{attrs:{fill:"#0066da",d:"M0 51.5V66c0 3.315 2.685 6 6 6h14.5l3-10.96-3-9.54-9.95-3z"}}),e("path",{attrs:{fill:"#e94235",d:"M20.5 0L0 20.5l10.55 3 9.95-3 2.95-9.41z"}}),e("path",{attrs:{fill:"#2684fc",d:"M20.5 20.5H0v31h20.5z"}}),e("path",{attrs:{fill:"#00ac47",d:"M82.6 8.68L69.5 19.42v33.66l13.16 10.79c1.97 1.54 4.85.135 4.85-2.37V11c0-2.535-2.945-3.925-4.91-2.32zM49.5 36v15.5h-29V72h43c3.315 0 6-2.685 6-6V53.08z"}}),e("path",{attrs:{fill:"#ffba00",d:"M63.5 0h-43v20.5h29V36l20-16.57V6c0-3.315-2.685-6-6-6z"}})])},s=[],n=i(1001),r={},l=(0,n.Z)(r,a,s,!1,null,null,null),o=l.exports},5476:function(t,e,i){i.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("svg",{attrs:{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"}},[e("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}})])},s=[],n=i(1001),r={},l=(0,n.Z)(r,a,s,!1,null,null,null),o=l.exports},9511:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1329.08 1329.08","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision","image-rendering":"optimizeQuality","fill-rule":"evenodd","clip-rule":"evenodd"}},[e("g",[e("g",[e("path",{attrs:{d:"M664.54 0c367.02 0 664.54 297.52 664.54 664.54s-297.52 664.54-664.54 664.54S0 1031.56 0 664.54 297.52 0 664.54 0z",fill:"#e5e5e4","fill-rule":"nonzero"}}),e("path",{staticClass:"fil1",attrs:{d:"M664.54 12.94c359.87 0 651.6 291.73 651.6 651.6s-291.73 651.6-651.6 651.6-651.6-291.73-651.6-651.6 291.74-651.6 651.6-651.6z"}}),e("path",{attrs:{d:"M664.54 65.21c331 0 599.33 268.33 599.33 599.33 0 331-268.33 599.33-599.33 599.33-331 0-599.33-268.33-599.33-599.33 0-331 268.33-599.33 599.33-599.33z",fill:"#4a8cff","fill-rule":"nonzero"}}),e("path",{staticClass:"fil1",attrs:{d:"M273.53 476.77v281.65c.25 63.69 52.27 114.95 115.71 114.69h410.55c11.67 0 21.06-9.39 21.06-20.81V570.65c-.25-63.69-52.27-114.95-115.7-114.69H294.6c-11.67 0-21.06 9.39-21.06 20.81zm573.45 109.87l169.5-123.82c14.72-12.18 26.13-9.14 26.13 12.94v377.56c0 25.12-13.96 22.08-26.13 12.94l-169.5-123.57V586.64z"}})])])])},s=[],n={},r=n,l=i(1001),o=(0,l.Z)(r,a,s,!1,null,"1230af58",null),d=o.exports},3048:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textarea_form_wrapper",class:{active:t.isFoucsed,required:t.required,icon_left:t.$slots.icon_left}},[e("div",{staticClass:"icon_left"},[t._t("icon_left",null,null,{active:t.isFoucsed})],2),e("div",{staticClass:"textarea_control"},[e("label",{attrs:{for:t.id}},[t._v(t._s(t.label))]),e("div",{ref:"textareaWrapper",staticClass:"textarea_wrapper"},[e("textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"textarea",staticClass:"form_textarea",attrs:{id:t.id,type:t.type,placeholder:t.placeholder,required:t.required,rows:"1"},domProps:{value:t.val},on:{focus:t.focus,blur:t.blur,change:t.onChange,input:[function(e){e.target.composing||(t.val=e.target.value)},t.onInput]}},"textarea",t.inputProps,!1)),e("span",{ref:"hiddenText",staticClass:"hidden_text"},[t._v(t._s(t.value))])])])])},s=[],n={props:{inputProps:{type:Object},id:{type:String},label:{type:String},value:{type:String},type:{type:String,default:"text"},placeholder:{type:String,default:""},required:{type:Boolean,default:!1}},data(){return{isFoucsed:!1}},computed:{val:{get(){return this.value},set(t){this.$emit("input",t)}}},methods:{onChange(t){this.val=t.target.value,this.$emit("change",t)},onInput(t){this.val=t.target.value,this.$nextTick((()=>{let t=this.$refs.hiddenText,e=this.$refs.textareaWrapper,i=t.clientHeight,a=e.clientHeight;e.style.height=i>=a?i+"px":"auto"})),this.$emit("input",t.target.value)},focus(){this.isFoucsed=!0,this.$emit("focus")},blur(){this.isFoucsed=!1,this.$emit("focus")}}},r=n,l=i(1001),o=(0,l.Z)(r,a,s,!1,null,null,null),d=o.exports},9290:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"AvailabilityModal","dialog-class":"full_modal no_static_height","hide-footer":"","hide-header":"",centered:"",size:"lg"},on:{hidden:t.reset,shown:t.shown},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"header d-flex justify-content-between align-items-center"},[e("div",{staticClass:"fs-lg"},[e("span",[t._v(t._s(t.$t("availability")))]),t._v("  "),e("span",{staticClass:"text-muted"},[t._v(t._s(t.displayDate))])]),e("BIcon",{staticClass:"btn_icon btn_icon_md text-muted",attrs:{icon:"x",scale:"0.8"},on:{click:t.reset}})],1),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"body mb-3 my-5"},[0==t.intervals.length?e("div",{staticClass:"p-4 text-center border rounded-lg text-muted"},[t._v(t._s(t.$t("noAvailability")))]):t._e(),t._l(t.intervals,(function(i,a){return e("div",{key:a,staticClass:"mb-4"},[e("div",{staticClass:"d-flex align-items-center"},[e("form-select",{staticClass:"mr-4",attrs:{label:t.$t("start"),options:t.intervalsStartOptions,is_invalid:!!t.error(a)},on:{change:e=>t.timeChanged(e,a)},model:{value:i.start,callback:function(e){t.$set(i,"start",e)},expression:"interval.start"}}),e("form-select",{attrs:{label:t.$t("end"),options:t.intervalsEndOptions,is_invalid:!!t.error(a)},on:{change:e=>t.timeChanged(e,a)},model:{value:i.end,callback:function(e){t.$set(i,"end",e)},expression:"interval.end"}}),e("div",{staticClass:"w-25 position-relative",staticStyle:{top:"12px"}},[e("span",{staticClass:"btn_icon btn_icon_md mx-auto",on:{click:function(e){return t.removeIntreval(a)}}},[e("BIcon",{staticClass:"text-muted",attrs:{icon:"trash",scale:"1.4"}})],1)])],1),t.error(a)?e("span",{staticClass:"fs-xs text-danger"},[t._v(t._s(t.error(a).msg))]):t._e()])})),e("div",{staticClass:"d-flex align-items-center my-4"},[e("b-btn",{staticClass:"fs-sm font-weight-500",attrs:{variant:"outline-primary"},on:{click:t.addInterval}},[t._v(t._s(t.$t("addNewInterval")))]),e("b-btn",{staticClass:"fs-sm font-weight-500 ml-3",attrs:{variant:"outline-danger",disabled:0==t.intervals.length},on:{click:t.removeIntrevals}},[t._v(t._s(t.$t("removeAll")))])],1),t.noRepeat?t._e():e("form-select",{attrs:{label:t.$t("repeats"),options:t.repeatsOptions,required:""},model:{value:t.repeats,callback:function(e){t.repeats=e},expression:"repeats"}})],2),e("div",{staticClass:"footer d-flex align-items-center justify-content-end"},[e("b-btn",{staticClass:"filter_btn active mx-3",attrs:{size:"sm"},on:{click:t.reset}},[t._v(t._s(t.$t("cancel")))]),e("b-btn",{attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("apply")))])],1)])]},proxy:!0}])})},s=[],n=(i(6699),i(9868)),r=i(965),l=(i(6289),{components:{FormInput:n.Z,FormSelect:r.Z},props:{duration:{type:[Number,String],required:!0},dateFormat:{type:String,default:""},noRepeat:{type:Boolean,default:!1}},data(){return{date:null,intervals:[{start:4,end:6.5},{start:7,end:17},{start:.5,end:3},{start:9,end:12}],repeats:"only",errors:[]}},computed:{displayDate(){return this.dateFormat?this.date.clone().format(this.dateFormat):this.$isRtl?"ال"+this.date.clone().format("ddd, D MMM"):this.date.clone().format("ddd, MMM D")},intervalsStartOptions(){return this.$store.state.invites.intervalsStartOptions},intervalsEndOptions(){return this.$store.state.invites.intervalsEndOptions},repeatsOptions(){let t=this.date.clone().startOf("date"),e=[{text:`${t.format("MMM D")} ${this.$t("only")}`,value:"only"},{text:`All ${t.format("dddd")}s`,value:"all"}];return this.$isRtl&&(e[1].text=`${this.$t("all")} ${t.format("dddd")}`),[5,6].includes(t.weekday())||e.push({text:this.$t("allWeekdays"),value:"weekdays"}),e}},methods:{addInterval(){this.intervals.push({start:9,end:17})},removeIntreval(t){this.removeError(t),this.intervals.splice(t,1)},removeIntrevals(){this.intervals=[],this.errors=[]},error(t){return this.errors.find((e=>e.index==t))},removeError(t){this.errors=this.errors.filter((e=>e.index!=t))},setError(t,e){this.removeError(t),this.errors.push({index:t,msg:e})},validateInterval(t){let{start:e,end:i}=this.intervals[t];if(e>=i)return this.setError(t,this.$t("startTimeMustBeforeEndTime")),!1;let a=60*(i-e);return a<+this.duration?(this.setError(t,this.$t("intervalMustAtLeastDuration")),!1):0==this.errors.length},timeChanged(t,e){this.removeError(e),this.validateInterval(e)},validate(){let t=!0;for(let e=0;e<this.intervals.length;e++)if(!this.validateInterval(e)){t=!1;break}return t},save(){if(!this.validate())return;let t=[],e=[];for(let i=0;i<this.intervals.length;i++){if(e.includes(i))continue;let a=this.intervals[i],s=this.intervals.filter((({start:t,end:s},n)=>n!=i&&!e.includes(n)&&((t>a.start&&t<a.end||a.start>t&&a.start<s||t==a.start||s==a.end)&&(e.push(n),!0))));s.length>0&&(a={start:Math.min(...s.map((({start:t})=>t)),a.start),end:Math.max(...s.map((({end:t})=>t)),a.end)}),t.push(a),e.push(i)}this.$emit("submit",{date:this.date,intervals:t,repeats:this.noRepeat?"all":this.repeats}),this.$bvModal.hide("AvailabilityModal")},show({date:t,intervals:e}){this.date=t,this.intervals=e,this.repeats="only",this.$bvModal.show("AvailabilityModal")},shown(){},reset(){this.$bvModal.hide("AvailabilityModal"),setTimeout((()=>{this.removeIntrevals()}),300)}}}),o=l,d=i(1001),c=(0,d.Z)(o,a,s,!1,null,null,null),u=c.exports},120:function(t,e,i){i.r(e),i.d(e,{default:function(){return L}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create_one mt-5 position-relative"},[e("b-container",[e("div",{staticClass:"header mt-4 d-flex align-items-center justify-content-between"},[e("div",{staticClass:"h4 mb-0 font-weight-normal"},[t._v(t._s(t.formTitle))]),t.invite.availability.length?e("button",{staticClass:"fs-sm mx-3 filter_btn active",on:{click:t.preview}},[e("BIcon",{staticClass:"mr-2",attrs:{icon:"eye",scale:"1.5"}}),t._v(" "+t._s(t.$t("previewInvite"))+" ")],1):e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fs-sm text-muted mx-3 py-2 px-4 border border-transparent d-flex align-items-center justify-content-between",staticStyle:{opacity:"0.6"},attrs:{title:t.$t("previewInviteNoAvailabilityTooltip")}},[e("BIcon",{staticClass:"mr-2",attrs:{icon:"eye",scale:"1.5"}}),t._v(" "+t._s(t.$t("previewInvite"))+" ")],1)]),e("div",{staticClass:"field_title mt-4 pt-1"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("availableTimes")))])]),e("b-form",{staticClass:"mt-4",on:{submit:function(e){return e.preventDefault(),t.next.apply(null,arguments)}}},[e("b-row",[e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"duration",expression:"'duration'"}],attrs:{label:t.$t("eventDuration"),value:t.invite.duration,options:t.durationOptions,required:""},on:{change:t.durationChanged}},[e("BIcon",{attrs:{slot:"icon_left",icon:"clock-history"},slot:"icon_left"}),t.durationPlaceholder?e("virtual-input",{staticClass:"mb-0",on:{click:function(e){return t.$bvModal.show("DurationModal")}}},[e("span",{staticClass:"text-black",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.durationPlaceholder))]),e("BIcon",{attrs:{slot:"icon_right",icon:"pencil"},slot:"icon_right"})],1):t._e()],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"duration"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(t._s(t.$t("durationDesc")))])],1)]),e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"slotIncrement",expression:"'slotIncrement'"}],attrs:{label:t.$t("timeSlotIncrement"),options:t.slotIncrementOptions,required:""},model:{value:t.invite.slotIncrement,callback:function(e){t.$set(t.invite,"slotIncrement",e)},expression:"invite.slotIncrement"}},[e("BIcon",{attrs:{slot:"icon_left",icon:"clock"},slot:"icon_left"})],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"slotIncrement"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(" "+t._s(t.$t("slotIncrementDesc"))+" ")])],1)]),e("b-col",{staticClass:"mb-4",attrs:{cols:"12",lg:"8"}},[e("form-select",{directives:[{name:"visible",rawName:"v-visible",value:"dateRange",expression:"'dateRange'"}],attrs:{label:t.$t("dateRange"),value:t.dayRangeValue,options:t.dateRangeOptions,required:""},on:{change:t.dayRangeChanged}},[e("BIcon",{attrs:{slot:"icon_left",icon:"calendar3"},slot:"icon_left"}),t.dateRangeStr?e("virtual-input",{staticClass:"mb-0",attrs:{inputProps:{class:t.dateRangeStr?"d-inline-block w-auto":""}},on:{click:function(e){return t.$bvModal.show("DateRangeModal")}}},[e("span",{staticClass:"text-black",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.dateRangeStr))]),e("BIcon",{attrs:{slot:"icon_right",icon:"pencil"},slot:"icon_right"})],1):t._e()],1)],1),e("b-col",{staticClass:"d-none d-lg-block",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex position-absolute fs-sm text-muted",staticStyle:{top:"25px"},attrs:{"data-visible":"dateRange"}},[e("BIcon",{staticClass:"mt-1",attrs:{icon:"info-circle",scale:"1.5"}}),e("p",{staticClass:"ml-3 mb-0"},[t._v(" "+t._s(t.$t("dateRangeDesc"))+" ")])],1)]),e("b-col",{attrs:{cols:"12"}},[e("div",{staticClass:"availability mt-4"},[e("div",{staticClass:"availability_header d-flex w-100 align-items-center justify-content-between flex-wrap"},[e("div",{staticClass:"text-muted font-weight-500"},[e("span",[t._v(t._s(t.$t("selectAvailability")))]),e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("selectAvailabilityTooltip")}},[e("BIcon",{staticClass:"mx-2",staticStyle:{opacity:"0.5"},attrs:{icon:"question-circle",scale:"1.2"}})],1)]),e("div",{staticClass:"py-2 px-3 rounded-pill font-weight-500 d-flex align-items-center justify-content-center",style:""+(t.invite.preventConflict?"background-color: #f8e71c1c; color: #948a19":"background-color: #ff001a1a; color: #0000008a")},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("doubleBookingPreventionToolTip")}},[e("BIcon",{attrs:{icon:"info-circle",scale:"1.2"}})],1),e("span",{staticClass:"fs-sm mx-2"},[t._v(t._s(t.$t("doubleBookingPrevention")))]),e("b-checkbox",{attrs:{switch:""},model:{value:t.invite.preventConflict,callback:function(e){t.$set(t.invite,"preventConflict",e)},expression:"invite.preventConflict"}})],1)]),e("div",{staticClass:"availability_body my-4"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap mb-3"},[e("div",{staticClass:"availability_btns_controls d-flex align-items-center justify-content-between fs-sm font-weight-600 flex-wrap",staticStyle:{height:"35px"}},[e("div",{staticClass:"before_btn d-flex align-items-center",class:{disabled:t.isPrevBtnDisabled},on:{click:t.prevDateRange}},[t.$isRtl?e("BIcon",{attrs:{icon:"chevron-right"}}):e("BIcon",{attrs:{icon:"chevron-left"}}),e("span",{staticClass:"mx-1"},[t._v(" "+t._s(t.$t("before"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.FDOL.format("MMM D")))])])],1),e("div",{staticClass:"after_btn d-flex align-items-center ml-4",class:{disabled:t.isNextBtnDisabled},on:{click:t.nextDateRange}},[e("span",{staticClass:"mx-1"},[t._v(" "+t._s(t.$t("after"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.EDOL.format("MMM D")))])]),t.$isRtl?e("BIcon",{attrs:{icon:"chevron-left"}}):e("BIcon",{attrs:{icon:"chevron-right"}})],1),t.isNextBtnDisabled?e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"extend_btn d-flex align-items-center ml-4",attrs:{title:t.$t("extendTooltip")},on:{click:t.extendDateRange}},[e("BIcon",{attrs:{icon:"plus-lg"}}),e("span",{staticClass:"mx-1"},[t._v(t._s(t.$t("extend"))+" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.$t("dateRange")))])])],1):t._e()]),e("div",{staticClass:"availablity_timezone_control d-flex align-items-center"},[e("time-zones",{model:{value:t.invite.timezone,callback:function(e){t.$set(t.invite,"timezone",e)},expression:"invite.timezone"}}),e("span",{staticClass:"btn_icon ml-2",on:{click:t.resetAvailability}},[e("NotAllowIcon",{staticStyle:{fill:"#5e5e5e"},attrs:{width:"1.5rem"}})],1)],1)]),e("b-list-group",t._l(t.range,(function(i,a){return e("AvailableItem",{key:a,attrs:{date:i,availableDates:t.availableDates},on:{click:t.openAvailabilityModal}})})),1)],1)])])],1)],1)],1),e("div",{staticClass:"footer_control bg-white border-top w-100"},[e("b-container",{staticClass:"h-100"},[e("div",{staticClass:"d-flex justify-content-end align-items-center h-100"},[e("b-button",{staticClass:"filter_btn active mr-3 font-weight-500",attrs:{size:"sm"},on:{click:t.back}},[e("BIcon",{staticClass:"mr-2",attrs:{icon:""+(t.$isRtl?"chevron-right":"chevron-left"),scale:"0.8"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),e("b-button",{staticClass:"px-3",attrs:{variant:"primary"},on:{click:t.next}},[t._v(" "+t._s(t.$t("next"))+" ")])],1)])],1),e("DurationModal",{model:{value:t.invite.duration,callback:function(e){t.$set(t.invite,"duration",e)},expression:"invite.duration"}}),e("DateRangeModal",{attrs:{value:t.invite.dateRange},on:{submit:t.dateRangeChanged}}),e("AvailabilityModal",{ref:"availabilityModal",attrs:{duration:t.invite.duration},on:{submit:t.availableDateChanged}}),e("PreviewInvite",{ref:"preview"})],1)},s=[],n=(i(6699),i(9868)),r=i(965),l=i(3048),o=i(3375),d=i(8557),c=i(4106),u=i(9511),v=i(1257),h=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"DurationModal","dialog-class":"full_modal no_static_height","hide-footer":"","hide-header":"",centered:"",size:"lg"},on:{hidden:t.reset,shown:t.shown},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"header d-flex justify-content-between align-items-center"},[e("span",{staticClass:"fs-lg"},[t._v(t._s(t.$t("customEventDuration")))]),e("BIcon",{staticClass:"btn_icon btn_icon_md text-muted",attrs:{icon:"x",scale:"0.8"},on:{click:t.reset}})],1),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"body mb-3 my-5"},[e("form-input",{directives:[{name:"vuelidate",rawName:"v-vuelidate.noDirty",value:t.duration.value,expression:"duration.value",modifiers:{noDirty:!0}}],attrs:{required:"",placeholder:"30min",label:t.$t("eventDuration"),errorMsg:t.duration.errorMsg},scopedSlots:t._u([{key:"end_of_input",fn:function(){return[e("span",{staticClass:"text-muted position-absolute",style:(t.$isRtl?"left":"right")+":2px; bottom: 3px; z-index: 1; user-select: none; pointer-events: none"},[t._v(" "+t._s(t.$t("minutes"))+" ")])]},proxy:!0}]),model:{value:t.duration.value,callback:function(e){t.$set(t.duration,"value",e)},expression:"duration.value"}},[e("BIcon",{staticStyle:{top:"7px"},attrs:{slot:"icon_left",icon:"clock-history","font-scale":"1.4"},slot:"icon_left"})],1)],1),e("div",{staticClass:"footer d-flex align-items-center justify-content-end"},[e("b-btn",{staticClass:"filter_btn active mx-3",attrs:{size:"sm"},on:{click:t.reset}},[t._v(t._s(t.$t("cancel")))]),e("b-btn",{attrs:{type:"submit",variant:"primary",disabled:t.$v.$invalid}},[t._v(t._s(t.$t("save")))])],1)])]},proxy:!0}])})},m=[],f=i(4659),p=i(5795),b={components:{FormInput:n.Z},props:{value:{type:[String,Number]}},mixins:[f.oE],data(){return{duration:{value:this.value,isInvalid:!1,errorMsg:""}}},watch:{"duration.value"(){let t=this.$v.duration.value;return t.required?t.numeric?t.between?(this.duration.isInvalid=!1,void(this.duration.errorMsg="")):(this.duration.isInvalid=!0,void(this.duration.errorMsg="Must be between 1 and 720")):(this.duration.isInvalid=!0,void(this.duration.errorMsg="Must be an integer")):(this.duration.isInvalid=!0,void(this.duration.errorMsg="Required"))}},mounted(){this.duration.value=this.value},validations:{duration:{value:{required:p.C1,numeric:p.uR,between:(0,p.vX)(1,720)}}},methods:{save(){this.$v.$touch(),this.$v.$invalid||(this.$emit("input",this.duration.value),this.$bvModal.hide("DurationModal"))},shown(){this.duration.value=this.value},reset(){this.$bvModal.hide("DurationModal")}}},g=b,y=i(1001),_=(0,y.Z)(g,h,m,!1,null,null,null),x=_.exports,$=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"DateRangeModal","dialog-class":"full_modal no_static_height",show:!0,"hide-footer":"","hide-header":"",centered:"",size:"lg"},on:{hidden:t.reset,shown:t.shown},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"header d-flex justify-content-between align-items-center"},[e("span",{staticClass:"fs-lg"},[t._v(t._s(t.$t("customDateRange")))]),e("BIcon",{staticClass:"btn_icon btn_icon_md text-muted",attrs:{icon:"x",scale:"0.8"},on:{click:t.reset}})],1),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"body mb-3 my-5"},[e("form-select",{staticClass:"mb-5",attrs:{label:t.$t("dateRangeType"),options:t.dateRangeTypeOptions,required:""},model:{value:t.dateRange.type,callback:function(e){t.$set(t.dateRange,"type",e)},expression:"dateRange.type"}},[e("BIcon",{attrs:{slot:"icon_left",icon:"card-list","font-scale":"1.2"},slot:"icon_left"})],1),"days"==t.dateRange.type?e("form-input",{directives:[{name:"vuelidate",rawName:"v-vuelidate.noDirty",value:t.days.value,expression:"days.value",modifiers:{noDirty:!0}}],attrs:{required:"",label:t.$t("rollingDays"),errorMsg:t.days.errorMsg},scopedSlots:t._u([{key:"end_of_input",fn:function(){return[e("span",{staticClass:"text-muted position-absolute",style:(t.$isRtl?"left":"right")+":2px; bottom: 3px; z-index: 1; user-select: none; pointer-events: none"},[t._v(t._s(t.$t("days")))])]},proxy:!0}],null,!1,2633947620),model:{value:t.days.value,callback:function(e){t.$set(t.days,"value",t._n(e))},expression:"days.value"}},[e("BIcon",{staticStyle:{top:"7px"},attrs:{slot:"icon_left",icon:"calendar4-range","font-scale":"1.4"},slot:"icon_left"})],1):t._e(),"specific"==t.dateRange.type?[e("virtual-input",{staticClass:"mb-3",attrs:{label:t.$t("startAndEndDates"),inputProps:{class:"cursor-auto"}}},[e("BIcon",{staticStyle:{top:"7px"},attrs:{slot:"icon_left",icon:"calendar4-range"},slot:"icon_left"}),e("span",{staticClass:"text-dark fs-md",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.startAndEndDatesStr))])],1),e("date-picker",{staticClass:"border-0",attrs:{"is-range":"","min-date":t.minDate,"is-expanded":"","title-position":"left",locale:{id:t.$i18n.locale,firstDayOfWeek:2}},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})]:t._e()],2),e("div",{staticClass:"footer d-flex align-items-center justify-content-end"},[e("b-btn",{staticClass:"filter_btn active mx-3",attrs:{size:"sm"},on:{click:t.reset}},[t._v(t._s(t.$t("cancel")))]),e("b-btn",{attrs:{type:"submit",variant:"primary",disabled:t.$v.$invalid}},[t._v(t._s(t.$t("save")))])],1)])]},proxy:!0}])})},C=[],D=i(2416),M=i.n(D),w={components:{FormInput:n.Z,FormSelect:r.Z,DatePicker:M(),VirtualInput:o.Z},props:{value:{type:Object}},mixins:[f.oE],data(){return{dateRange:{type:"days",start:"",end:""},days:{value:7,isInvalid:!1,errorMsg:""},minDate:this.$moment().utc().startOf("date").toDate(),isShown:!1}},watch:{"dateRange.type"(t,e){"indefinite"==e&&(this.range={start:this.dateRange.start,end:this.dateRange.start.clone().add(6,"d")})},"days.value"(t){let e=this.$v.days.value;return e.required?e.numeric?e.between?(this.days.isInvalid=!1,this.days.errorMsg="",void(this.isShown&&(this.dateRange.start=this.$moment().utc().startOf("date"),this.dateRange.end=this.$moment().utc().startOf("date").add(t,"days")))):(this.days.isInvalid=!0,void(this.days.errorMsg=this.$t("mustBetween",[e.$params.between.min,e.$params.between.max]))):(this.days.isInvalid=!0,void(this.days.errorMsg=this.$t("mustInteger"))):(this.days.isInvalid=!0,void(this.days.errorMsg=this.$t("required")))}},computed:{dateRangeTypeOptions(){return this.$store.state.invites.dateRangeTypeOptions},startAndEndDatesStr(){let{start:t,end:e}=this.dateRange;const i=t=>t.year()===this.$moment().year();return t=t.format("MMM D"+(i(t)?"":", YYYY")),e=e.format("MMM D"+(i(e)?"":", YYYY")),t===e?t:`${t} - ${e}`},range:{get(){return{start:this.dateRange.start.toDate(),end:this.dateRange.end.toDate()}},set(t){this.dateRange.start=this.$moment(t.start).utc().startOf("date"),this.dateRange.end=this.$moment(t.end).utc().startOf("date")}}},validations:{days:{value:{required:(0,p.CF)((function(t){return"days"===t.type})),numeric:p.uR,between:(0,p.vX)(1,1e3)}}},methods:{save(){if(this.$v.$touch(),this.$v.$invalid)return;let t={...this.dateRange};"indefinite"==t.type?(t.start=this.$moment().utc().startOf("date"),t.end=null):"specific"==t.type&&(t.end=t.end.clone().add(1,"d")),this.$emit("submit",t),this.$emit("input",t),this.$bvModal.hide("DateRangeModal")},shown(){let{start:t,end:e,type:i}=this.value;this.dateRange={start:t,end:e,type:i},"indefinite"==i?this.days.value=7:(this.days.value=e.diff(t,"days"),this.dateRange.end=this.dateRange.end.clone().subtract(1,"d")),this.$nextTick((()=>{this.isShown=!0}))},reset(){this.isShown=!1,this.$bvModal.hide("DateRangeModal")}}},R=w,I=(0,y.Z)(R,$,C,!1,null,null,null),k=I.exports,S=i(9290),O=i(5476),A=i(702),E=i(8528),T=i(6289),B=i(2106),Y=i(2003),Z={components:{FormInput:n.Z,FormTextArea:l.Z,VirtualInput:o.Z,CameraPlus:c.Z,ZoomIcon:u.Z,GoogleMeetIcon:v.Z,DurationModal:x,DateRangeModal:k,FormSelect:r.Z,AvailabilityModal:S.Z,TimeZones:d.Z,NotAllowIcon:O.Z,AvailableItem:B.Z,PreviewInvite:A.Z},name:"When",mixins:[f.oE,E.Z],data(){return{invite:{duration:30,slotIncrement:30,dateRange:{type:"days",start:this.$moment().utc().startOf("date"),end:this.$moment().utc().add(6,"d").startOf("date")},timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,preventConflict:!0,availability:[]},firstDateOfList:this.$moment().utc().startOf("date")}},validations:{invite:{duration:{required:p.C1},slotIncrement:{},dateRange:{},timezone:{},preventConflict:{},availability:{}}},watch:{"invite.dateRange.start"(t){this.firstDateOfList=t},"invite.dateRange":{handler(t,e){let{start:i,end:a,type:s}=t,n=[];for(let r of this.invite.availability){if("indefinite"==s){r.rrule=r.rrule.replace(/(;UNTIL=.+Z)|(UNTIL=.+Z)/g,""),n.push(r);continue}let t=(0,T.SA)(r.rrule);if(-1!=t.toString().indexOf("RDATE")){let e=t.all()[0];if(e=this.$moment(e).utc().startOf("date"),e.isBefore(i,"date")||e.isAfter(a,"date"))continue;n.push(r);continue}let l=/DTSTART:(.+)Z\\/g,o=/UNTIL=(.+)Z/g;r.rrule=r.rrule.replace(l,`DTSTART:${i.locale("en").format("YYYYMMDDTHHmmss")}Z\\`),"indefinite"==e.type?r.rrule=r.rrule+`;UNTIL=${a.locale("en").format("YYYYMMDDTHHmmss")}Z`:r.rrule=r.rrule.replace(o,`UNTIL=${a.locale("en").format("YYYYMMDDTHHmmss")}Z`),n.push(r)}this.invite.availability=n},deep:!0}},async beforeRouteEnter(t,e,i){if(!t.params.isTrusted)return i({name:`${t.meta.type}IndexForm`,params:t.params});i((t=>t.init(Y.Z.state.invites.one)))},computed:{durationOptions(){return this.$store.state.invites.durationOptions},durationPlaceholder(){let t=!this.durationOptions.some((t=>t.value==this.invite.duration));if(!t)return"";let e=this.invite.duration;if(e<60)return this.$moment.duration(e,"minutes").humanize();let i=Math.floor(e/60);if(e%=60,0===e)return this.$moment.duration(i,"hours").humanize();i=this.$moment.duration(i,"hours").humanize(),e=this.$moment.duration(e,"minutes").humanize();let a=this.$isRtl?" و ":" ";return i+a+e},slotIncrementOptions(){return this.$store.state.invites.slotIncrementOptions},dateRangeOptions(){return this.$store.state.invites.dateRangeOptions},dateRangeStr(){let{type:t,start:e,end:i}=this.invite.dateRange;if("indefinite"==t)return this.$t("indefinite");if("days"==t){let t=i.clone().diff(e,"days");return[3,7,31].includes(t)?"":this.$moment.duration(t,"days").humanize()+" "+this.$t("intoFuture")}if("specific"==t){const t=t=>t.year()===this.$moment().year();return e=e.format("MMM D"+(t(e)?"":", YYYY")),i=i.clone().add(-1,"d").format("MMM D"+(t(i)?"":", YYYY")),e===i?e:`${e} - ${i}`}return""},FDOL(){let{start:t}=this.invite.dateRange;return t.isSameOrAfter(this.firstDateOfList)?t.clone():this.firstDateOfList},EDOL(){let{end:t,type:e}=this.invite.dateRange,i=this.firstDateOfList.clone().add(7,"d");return"indefinite"==e||(i=t.isSameOrBefore(i)?t.clone():i),i.clone().add(-1,"d")},until(){return"indefinite"==this.invite.dateRange.type?null:this.invite.dateRange.end.clone()},range(){if(!this.FDOL.isValid()||!this.EDOL.isValid())return[];let t=this.FDOL.clone(),e=this.EDOL.clone(),i=[];while(t.isSameOrBefore(e))i.push(t.clone()),t.add(1,"d");return i},availableDates(){return this.invite.availability.map((t=>{let e=(0,T.SA)(t.rrule);return{duration:t.duration,dates:e.between(this.FDOL.toDate(),this.EDOL.clone().add(1,"d").toDate()),rruleSet:e}}))},dayRangeValue:{get(){let{start:t,end:e,type:i}=this.invite.dateRange;return"indefinite"==i?6:e.clone().diff(t,"days")},set(t){let e=this.$moment().utc().startOf("date"),i=this.$moment().utc().add(t,"d").startOf("date");this.invite.dateRange={type:"days",start:e,end:i}}},isNextBtnDisabled(){let{end:t,type:e}=this.invite.dateRange;if("indefinite"==e)return!1;let i=this.EDOL.clone().add(1,"d");return t.isBetween(this.FDOL,i)||t.isSame(i,"d")},isPrevBtnDisabled(){let{start:t}=this.invite.dateRange;return t.isSame(this.FDOL,"d")}},methods:{init(t){for(let e in t)this.invite[e]=t[e];this.firstDateOfList=this.invite.dateRange.start.clone()},durationChanged(t){if("custom"==t)return this.$bvModal.show("DurationModal");this.invite.duration=t},dayRangeChanged(t){if("custom"==t)return this.$bvModal.show("DateRangeModal");this.dayRangeValue=t},dateRangeChanged(t){this.invite.dateRange=t},nextDateRange(){let{end:t,type:e}=this.invite.dateRange,i=this.firstDateOfList.clone().add(7,"d");"indefinite"!=e&&t.isSameOrBefore(i)&&(i=t.clone()),this.firstDateOfList=i},prevDateRange(){let{start:t}=this.invite.dateRange,e=this.firstDateOfList.clone().subtract(7,"d");this.firstDateOfList=t.isSameOrAfter(e)?t.clone():e},extendDateRange(){this.invite.dateRange.end=this.invite.dateRange.end.clone().add(7,"d")},openAvailabilityModal(t){this.$refs.availabilityModal.show(t)},hourAndMinute(t){let e=Math.floor(t),i=Math.round(60*(t-e));return{hour:e,minute:i}},availableDateChanged(t){let e=[],i=t=>!!e.find((e=>e.duration==t.duration&&e.rrule==t.rrule)),{date:a,intervals:s,repeats:n}=t;if(0==this.invite.availability.length){if("only"==n)for(let t of s){let{start:s,end:n}=t,r=60*(n-s),{hour:l,minute:o}=this.hourAndMinute(s),d="RDATE:"+a.clone().hour(l).minute(o).locale("en").format("YYYYMMDDTHHmmss")+"Z",c={duration:r,rrule:d};i(c)||e.push(c)}else if("all"==n)for(let t of s){let{start:s,end:n}=t,r=60*(n-s),{hour:l,minute:o}=this.hourAndMinute(s),d=new T.pF;d.rrule(new T.Ci({freq:T.Ci.WEEKLY,dtstart:this.invite.dateRange.start.clone().toDate(),until:this.invite.dateRange.end.clone().toDate(),byweekday:[a.clone().weekday()],byhour:[l],byminute:[o]}));let c={duration:r,rrule:d.toString()};i(c)||e.push(c)}else if("weekdays"==n)for(let t of s){let{start:a,end:s}=t,n=60*(s-a),{hour:r,minute:l}=this.hourAndMinute(a),o=new T.pF;o.rrule(new T.Ci({freq:T.Ci.WEEKLY,dtstart:this.invite.dateRange.start.clone().toDate(),until:this.invite.dateRange.end.clone().toDate(),byweekday:[T.Ci.MO,T.Ci.TU,T.Ci.WE,T.Ci.TH,T.Ci.FR],byhour:[r],byminute:[l]}));let d={duration:n,rrule:o.toString()};i(d)||e.push(d)}return void(this.invite.availability=e)}let r=!1;0==s.length&&(r=!0);let l=a.clone().locale("en").format("dd").toUpperCase();for(let o of this.invite.availability){let t,d,{duration:c,rrule:u}=o,v="",h=this.weekdaysFromRRuleString(u),m=-1!=u.indexOf("EXDATE"),f="",p=[];if(0==h.length)v="only";else{v=1==h.length?"all":"weekdays";let e=u.match(/BYHOUR=(\d+);BYMINUTE=(\d+)/);t=+e[1],d=+e[2],f=a.clone().set({hour:t,minute:d}).locale("en").format("YYYYMMDDTHHmmss")+"Z",p=this.exDatesFromRRuleString(u)}if("only"==n){if(!r){for(let t of s){let{start:s,end:n}=t,r=60*(n-s),{hour:l,minute:o}=this.hourAndMinute(s),d="RDATE:"+a.clone().hour(l).minute(o).locale("en").format("YYYYMMDDTHHmmss")+"Z",c={duration:r,rrule:d};i(c)||e.push(c)}r=!0}if("only"==v){let t=this.momentFromRdate(u);t.isSame(a,"d")||i(o)||e.push(o);continue}h.includes(l)&&(m?p.includes(f)||(u+=","+f):u+="\nEXDATE:"+f);let t={duration:c,rrule:u};i(t)||e.push(t)}else if("all"==n){if(!r){for(let t of s){let{start:s,end:n}=t,r=60*(n-s),{hour:l,minute:o}=this.hourAndMinute(s),d=new T.pF;d.rrule(new T.Ci({freq:T.Ci.WEEKLY,dtstart:this.invite.dateRange.start.clone().toDate(),until:this.invite.dateRange.end.clone().toDate(),byweekday:[a.clone().weekday()],byhour:[l],byminute:[o]}));let c={duration:r,rrule:d.toString()};i(c)||e.push(c)}r=!0}if("only"==v)this.momentFromRdate(u).weekday()!=a.weekday()&&(i(o)||e.push(o));else if("all"==v){if(h[0]!=l){if(m&&p.includes(f))if(1==p.length)u=u.replace(/\nEXDATE:.*/,"");else{let t=p.filter((t=>t!=f)).join(",");u=u.replace(/\nEXDATE:.*/,"\nEXDATE:"+t)}let t={duration:c,rrule:u};i(t)||e.push(t)}}else if("weekdays"==v){if(m&&p.includes(f))if(1==p.length)u=u.replace(/\nEXDATE:.*/,"");else{let t=p.filter((t=>t!=f)).join(",");u=u.replace(/\nEXDATE:.*/,"\nEXDATE:"+t)}if(h.includes(l)){let t=new RegExp(`,${l}|${l},`,"g");u=u.replace(t,"")}let t={duration:c,rrule:u};i(t)||e.push(t)}}else if("weekdays"==n){if(!r){for(let t of s){let{start:a,end:s}=t,n=60*(s-a),{hour:r,minute:l}=this.hourAndMinute(a),o=new T.pF;o.rrule(new T.Ci({freq:T.Ci.WEEKLY,dtstart:this.invite.dateRange.start.clone().toDate(),until:this.invite.dateRange.end.clone().toDate(),byweekday:[T.Ci.MO,T.Ci.TU,T.Ci.WE,T.Ci.TH,T.Ci.FR],byhour:[r],byminute:[l]}));let d={duration:n,rrule:o.toString()};i(d)||e.push(d)}r=!0}if("only"==v){let t=this.momentFromRdate(u).locale("en").format("dd");["SA","SU"].includes(t)&&(i(o)||e.push(o))}else"all"==v&&["SA","SU"].includes(h[0])&&(i(o)||e.push(o))}}this.invite.availability=e},weekdaysFromRRuleString(t){if(-1==t.indexOf("BYDAY"))return[];let e=t.match(/BYDAY=([^;]+)/);return e[1].split(",")},momentFromRdate(t){return t=t.split(":")[1],this.$moment(t).utc()},exDatesFromRRuleString(t){if(-1==t.indexOf("EXDATE"))return[];let e=t.split("EXDATE:")[1];return e=e.split(","),e},resetAvailability(){this.invite.availability=[]}}},F=Z,z=(0,y.Z)(F,a,s,!1,null,null,null),L=z.exports}}]);