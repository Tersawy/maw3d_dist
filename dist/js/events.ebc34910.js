"use strict";(self["webpackChunkmawed"]=self["webpackChunkmawed"]||[]).push([[136],{6939:function(t,e,i){i.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("div",{staticClass:"mx-2 fs-sm"},[t._v(t._s(t.paginateFrom)+"-"+t._s(t.paginateTo)+" of "+t._s(t.total))]),e("b-pagination",{staticClass:"custom_pagination",attrs:{"hide-goto-end-buttons":"","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"prev-text",fn:function(){return[t._v(" < ")]},proxy:!0},{key:"next-text",fn:function(){return[t._v(" > ")]},proxy:!0}]),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},a=[],s={props:{currentPage:{type:Number,default:1},total:{type:Number,default:1},perPage:{type:Number,default:1}},computed:{page:{get(){return this.currentPage},set(t){this.$emit("update:currentPage",t)}},paginateTo(){let t=this.currentPage*this.perPage;return t>this.total&&(t=this.total),t},paginateFrom(){return(this.currentPage-1)*this.perPage+1}}},r=s,l=i(1001),o=(0,l.Z)(r,n,a,!1,null,null,null),c=o.exports},3089:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"events"},[e("b-container",[e("div",{staticClass:"header mt-4"},[e("div",{staticClass:"h3 font-weight-normal"},[t._v(t._s(t.$t("myEvents")))])]),e("b-overlay",{attrs:{show:t.isLoading,variant:"white","spinner-variant":"primary","no-fade":"",opacity:"1"}},[e("div",{staticClass:"d-flex mt-5"},[e("b-dropdown",{staticClass:"d-flex align-items-center",attrs:{right:"","menu-class":"p-0 shadow border-0","toggle-class":`filter_btn ${!!t.filters.time.type&&"active"}`},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.filters.time.type?e("b-icon",{staticClass:"mr-2",attrs:{icon:"check2",variant:"primary",scale:"1.2"}}):e("b-icon",{staticClass:"mr-2",attrs:{icon:"calendar2-week",variant:"primary"}}),e("div",{staticClass:"mx-2"},[t._v(t._s(t.filters.time.name))])]},proxy:!0}])},t._l(t.timesOptions,(function(i){return e("b-dropdown-item",{key:i.id,attrs:{"link-class":`p-3 ${t.filters.time.type==i.id&&"active"}`},on:{click:function(e){t.filters.time=i}}},[t._v(" "+t._s(i.name)+" ")])})),1),e("b-dropdown",{staticClass:"mx-3 d-flex align-items-center",attrs:{right:"","menu-class":"p-0 shadow border-0","toggle-class":`filter_btn ${!!t.filters.link.id&&"active"}`},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.filters.link.id?e("b-icon",{staticClass:"mr-2",attrs:{icon:"check2",variant:"primary",scale:"1.2"}}):e("b-icon",{staticClass:"mr-2",attrs:{icon:"files",variant:"primary"}}),e("div",{staticClass:"mx-2"},[t._v(t._s(t.filters.link.name))])]},proxy:!0}])},t._l(t.inviteOptions,(function(i){return e("b-dropdown-item",{key:i.id,attrs:{"link-class":`p-3 ${t.filters.link.id==i.id&&"active"}`},on:{click:function(e){t.filters.link=i}}},[t._v(" "+t._s(i.name)+" ")])})),1)],1),e("b-table",{attrs:{fields:t.table.fields,items:t.events,"current-page":1,"row-clicked":"",responsive:"",borderless:"",hover:"","table-class":"mt-4 fs-sm","thead-tr-class":"border-bottom text-muted","tbody-tr-class":"cursor-pointer"},on:{"row-clicked":t.showEvent},scopedSlots:t._u([{key:"cell(eventName)",fn:function({value:i}){return[Array.isArray(i)?e("div",[e("span",{staticClass:"text-nowrap"},[t._v(t._s(i[0]))]),t._v(" "+t._s(t.$t("and"))+" "),e("span",{staticClass:"text-nowrap"},[t._v(t._s(i[1]))])]):e("div",[t._v(t._s(i))])]}}])})],1),t.eventsTotal?e("Paginate",{attrs:{currentPage:t.table.currentPage,perPage:t.table.perPage,total:t.eventsTotal},on:{"update:currentPage":function(e){return t.$set(t.table,"currentPage",e)},"update:current-page":function(e){return t.$set(t.table,"currentPage",e)}}}):t._e()],1)],1)},a=[],s=i(6939),r=i(2003),l={components:{Paginate:s.Z},data(){return{filters:{time:{name:"All time",type:""},link:{name:"All links",id:""}},table:{fields:[{label:"Date",key:"date",tdClass:"text-nowrap"},{label:"Event name",key:"eventName"},{label:"Invitee Email",key:"inviteeEmail"},{label:"Link",key:"link",tdClass:"text-nowrap"}],perPage:10,currentPage:1},isLoading:!1}},async beforeRouteEnter(t,e,i){r.Z.commit("setAppLoading",!0);try{await Promise.all([r.Z.dispatch("getEvents","?perPage=10"),r.Z.dispatch("getInviteOptions")])}finally{i()}},mounted(){this.endAppLoading()},watch:{"table.perPage"(){this.getEvents()},"table.currentPage"(){this.getEvents()},"filters.time.type"(){this.getEvents()},"filters.link.id"(){this.getEvents()}},computed:{timesOptions(){return this.$store.state.events.timesOptions},inviteOptions(){return this.$store.getters.inviteOptions},events(){return this.$store.state.events.all.map((t=>({id:t.id,date:this.date(t.startDate),eventName:this.getEventName(t),inviteeEmail:t.invitees.map((t=>t.email)).join(", "),link:t.invite.name})))},eventsTotal(){return this.$store.state.events.total}},methods:{async getEvents(){this.isLoading=!0;let t=`?perPage=${this.table.perPage}&page=${this.table.currentPage}&timeType=${this.filters.time.type}&inviteID=${this.filters.link.id}`;try{await this.$store.dispatch("getEvents",t)}finally{this.isLoading=!1}},getEventName(t){let e=t.invite.name,i="oneOnOne"==t.invite.type;if(!i)return e;let n=t.invite.user,a=t.invitees.find((t=>!t.isGuest));return n=n.firstName+" "+n.lastName,[a.name,n]},date(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})},showEvent(t){this.$router.push({name:"event",params:{id:t.id,event:t}})}}},o=l,c=i(1001),u=(0,c.Z)(o,n,a,!1,null,null,null),p=u.exports}}]);