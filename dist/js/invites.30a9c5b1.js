"use strict";(self["webpackChunkmawed"]=self["webpackChunkmawed"]||[]).push([[61],{6939:function(e,t,i){i.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex align-items-center justify-content-end"},[t("div",{staticClass:"mx-2 fs-sm"},[e._v(e._s(e.paginateFrom)+"-"+e._s(e.paginateTo)+" of "+e._s(e.total))]),t("b-pagination",{staticClass:"custom_pagination",attrs:{"hide-goto-end-buttons":"","total-rows":e.total,"per-page":e.perPage},scopedSlots:e._u([{key:"prev-text",fn:function(){return[e._v(" < ")]},proxy:!0},{key:"next-text",fn:function(){return[e._v(" > ")]},proxy:!0}]),model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)},n=[],s={props:{currentPage:{type:Number,default:1},total:{type:Number,default:1},perPage:{type:Number,default:1}},computed:{page:{get(){return this.currentPage},set(e){this.$emit("update:currentPage",e)}},paginateTo(){let e=this.currentPage*this.perPage;return e>this.total&&(e=this.total),e},paginateFrom(){return(this.currentPage-1)*this.perPage+1}}},r=s,l=i(1001),o=(0,l.Z)(r,a,n,!1,null,null,null),c=o.exports},7611:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"invites"},[t("b-container",[t("div",{staticClass:"header mt-4"},[t("div",{staticClass:"h3 font-weight-normal"},[e._v("My Links")])]),t("b-overlay",{attrs:{show:e.isLoading,variant:"white","spinner-variant":"primary","no-fade":"",opacity:"1"}},[t("div",{staticClass:"mt-5"},[t("div",[t("b-btn",{class:`filter_btn ${!!e.filters.excludeExpired&&"active"} d-flex align-items-center`,on:{click:function(t){e.filters.excludeExpired=!e.filters.excludeExpired}}},[e.filters.excludeExpired?t("b-icon",{staticClass:"mr-2",attrs:{icon:"check2",variant:"primary",scale:"1.2"}}):t("b-iconstack",{attrs:{"font-scale":"1.4"}},[t("b-icon",{attrs:{stacked:"",icon:"slash",variant:"primary",scale:"1.5"}}),t("b-icon",{attrs:{stacked:"",icon:"circle",variant:"primary"}})],1),t("div",{staticClass:"mx-2"},[e._v("Exclude expired")])],1)],1),t("div",{staticClass:"invites-body pt-4"},[t("b-row",{attrs:{cols:"1","cols-md":"2","cols-lg":"3"}},e._l(e.invites,(function(i){return t("b-col",{key:i.id,staticClass:"mb-4 h-auto"},[t("LinkInvite",{attrs:{invite:i},on:{onDelete:e.openDeleteInviteModal}})],1)})),1)],1),t("Paginate",{attrs:{perPage:e.perPage,currentPage:e.currentPage,total:e.invitesTotal},on:{"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])],1),t("DeleteModal",{ref:"deleteModal",attrs:{field:e.$t("theLink")},on:{ok:e.confirmDelete}})],1)},n=[],s=i(8758),r=i(6939),l=i(6938),o=i(2003),c={components:{LinkInvite:s.Z,Paginate:r.Z,DeleteModal:l.Z},data(){return{filters:{excludeExpired:!1},perPage:10,currentPage:1,isLoading:!1}},async beforeRouteEnter(e,t,i){o.Z.commit("setAppLoading",!0);try{await o.Z.dispatch("getInvites")}finally{o.Z.commit("setAppLoading",!1),i()}},watch:{perPage(){this.getInvite()},currentPage(){this.getInvite()},"filters.excludeExpired"(){this.getInvite()}},computed:{invites(){return this.$store.getters.invites},invitesTotal(){return this.$store.state.invites.total}},methods:{async getInvite(){this.isLoading=!0;let e=this.filters.excludeExpired?"exclude":"include",t=`?perPage=${this.perPage}&page=${this.currentPage}&expired=${e}`;try{await this.$store.dispatch("getInvites",t)}finally{this.isLoading=!1}},openDeleteInviteModal(e){this.$refs.deleteModal.open(e)},async confirmDelete(e){this.$refs.deleteModal.setBusy(!0);try{await this.$store.dispatch("deleteInvite",e.inviteID),this.$store.state.invites.total>6&&(1!=this.page?this.page=1:await this.getInvite())}finally{this.$refs.deleteModal.close()}}}},u=c,d=i(1001),p=(0,d.Z)(u,a,n,!1,null,null,null),g=p.exports}}]);