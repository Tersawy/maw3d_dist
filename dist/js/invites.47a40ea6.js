"use strict";(self["webpackChunkmawed"]=self["webpackChunkmawed"]||[]).push([[61],{2897:function(t,e,i){i.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("div",{staticClass:"mx-2 fs-sm"},[t.$isRtl?e("span",[t._v(t._s(t.paginateTo)+"-"+t._s(t.paginateFrom)+" "+t._s(t.$t("of"))+" "+t._s(t.total))]):e("span",[t._v(" "+t._s(t.paginateFrom)+"-"+t._s(t.paginateTo)+" "+t._s(t.$t("of"))+" "+t._s(t.total)+" ")])]),e("b-pagination",{staticClass:"custom_pagination p-0",attrs:{"hide-goto-end-buttons":"","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"prev-text",fn:function(){return[t._v(" < ")]},proxy:!0},{key:"next-text",fn:function(){return[t._v(" > ")]},proxy:!0}]),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},s=[],n={props:{currentPage:{type:Number,default:1},total:{type:Number,default:1},perPage:{type:Number,default:1}},computed:{page:{get(){return this.currentPage},set(t){this.$emit("update:currentPage",t)}},paginateTo(){let t=this.currentPage*this.perPage;return t>this.total&&(t=this.total),t},paginateFrom(){return(this.currentPage-1)*this.perPage+1}}},r=n,l=i(1001),o=(0,l.Z)(r,a,s,!1,null,null,null),c=o.exports},9519:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"invites"},[e("b-container",[e("div",{staticClass:"header mt-4"},[e("div",{staticClass:"h3 font-weight-normal"},[t._v(t._s(t.$t("myLinks")))])]),e("b-overlay",{attrs:{show:t.isLoading,variant:"white","spinner-variant":"primary","no-fade":"",opacity:"1"}},[e("div",{staticClass:"mt-5"},[e("div",[e("b-btn",{class:`filter_btn ${!!t.filters.excludeExpired&&"active"} d-flex align-items-center`,on:{click:function(e){t.filters.excludeExpired=!t.filters.excludeExpired}}},[t.filters.excludeExpired?e("b-icon",{staticClass:"mr-2",attrs:{icon:"check2",variant:"primary",scale:"1.2"}}):e("b-iconstack",{attrs:{"font-scale":"1.4"}},[e("b-icon",{attrs:{stacked:"",icon:"slash",variant:"primary",scale:"1.5"}}),e("b-icon",{attrs:{stacked:"",icon:"circle",variant:"primary"}})],1),e("div",{staticClass:"mx-2"},[t._v(t._s(t.$t("excludeExpired")))])],1)],1),e("div",{staticClass:"invites-body pt-4"},[e("b-row",{attrs:{cols:"1","cols-md":"2","cols-lg":"3"}},t._l(t.invites,(function(i){return e("b-col",{key:i.id,staticClass:"mb-4 h-auto"},[e("LinkInvite",{attrs:{invite:i},on:{onDelete:t.openDeleteInviteModal}})],1)})),1)],1),e("Paginate",{attrs:{perPage:t.perPage,currentPage:t.currentPage,total:t.invitesTotal},on:{"update:perPage":function(e){t.perPage=e},"update:per-page":function(e){t.perPage=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])],1),e("DeleteModal",{ref:"deleteModal",attrs:{field:t.$t("theLink")},on:{ok:t.confirmDelete}})],1)},s=[],n=i(9131),r=i(2897),l=i(6938),o=i(2003),c={components:{LinkInvite:n.Z,Paginate:r.Z,DeleteModal:l.Z},data(){return{filters:{excludeExpired:!1},perPage:10,currentPage:1,isLoading:!1}},async beforeRouteEnter(t,e,i){o.Z.commit("setAppLoading",!0);try{await o.Z.dispatch("getInvites")}finally{o.Z.commit("setAppLoading",!1),i()}},watch:{perPage(){this.getInvites()},currentPage(){this.getInvites()},"filters.excludeExpired"(){this.getInvites()}},computed:{invites(){return this.$store.getters.invites},invitesTotal(){return this.$store.state.invites.total}},methods:{async getInvites(){this.isLoading=!0;let t=this.filters.excludeExpired?"exclude":"include",e=`?perPage=${this.perPage}&page=${this.currentPage}&expired=${t}`;try{await this.$store.dispatch("getInvites",e)}finally{this.isLoading=!1}},openDeleteInviteModal(t){this.$refs.deleteModal.open(t)},async confirmDelete(t){this.$refs.deleteModal.setBusy(!0);try{await this.$store.dispatch("deleteInvite",t.inviteID),this.$store.state.invites.total>6&&(1!=this.page?this.page=1:await this.getInvites())}finally{this.$refs.deleteModal.close()}}}},p=c,u=i(1001),d=(0,u.Z)(p,a,s,!1,null,null,null),g=d.exports}}]);